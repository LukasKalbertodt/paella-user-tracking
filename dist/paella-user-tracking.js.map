{"version":3,"file":"paella-user-tracking.js","mappings":"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","sources":["webpack://paella-user-tracking/webpack/universalModuleDefinition","webpack://paella-user-tracking/./src/plugins/UserTrackingPlugins.js","webpack://paella-user-tracking/./src/plugins/es.upv.paella.analytics.userTrackingDataPlugin.js","webpack://paella-user-tracking/./src/plugins/es.upv.paella.debug.userTrackingDataPlugin.js","webpack://paella-user-tracking/./src/plugins/es.upv.paella.debugTag.userTrackingDataPlugin.js","webpack://paella-user-tracking/./src/plugins/es.upv.paella.matomo.userTrackingDataPlugin.js","webpack://paella-user-tracking/./src/plugins/es.upv.paella.userEventTracker.js","webpack://paella-user-tracking/./src/plugins/ sync \\.js","webpack://paella-user-tracking/external umd {\"commonjs\":\"paella-core\",\"commonjs2\":\"paella-core\",\"amd\":\"paella-core\"}","webpack://paella-user-tracking/webpack/bootstrap","webpack://paella-user-tracking/webpack/runtime/compat get default export","webpack://paella-user-tracking/webpack/runtime/define property getters","webpack://paella-user-tracking/webpack/runtime/hasOwnProperty shorthand","webpack://paella-user-tracking/webpack/runtime/make namespace object","webpack://paella-user-tracking/./src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"paella-core\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"paella-core\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"paella-user-tracking\"] = factory(require(\"paella-core\"));\n\telse\n\t\troot[\"paella-user-tracking\"] = factory(root[undefined]);\n})(self, (__WEBPACK_EXTERNAL_MODULE__995__) => {\nreturn ","import { PluginModule } from \"paella-core\";\nimport packageData from \"../../package.json\";\n\nlet g_pluginModule = null;\n\nexport default class UserTrackingPlugins extends PluginModule {\n    static Get() {\n        if (!g_pluginModule) {\n            g_pluginModule = new UserTrackingPlugins();\n        }\n        return g_pluginModule;\n    }\n\n    get moduleName() {\n        return \"paella-user-tracking\";\n    }\n\n    get moduleVersion() {\n        return packageData.version;\n    }\n}","\nimport { DataPlugin  } from \"paella-core\";\nimport UserTrackingPlugins from \"./UserTrackingPlugins\";\n\nexport default class AnalyticsUserTrackingDataPlugin extends DataPlugin {\n    getPluginModuleInstance() {\n\t\treturn UserTrackingPlugins.Get();\n\t}\n\n\tget name() {\n\t\treturn super.name || \"es.upv.paella.analytics.userTrackingDataPlugin\";\n\t}\n\n    async load() {\n        const trackingId = this.config.trackingId;\n        const domain = this.config.domain || \"auto\";\n        if (trackingId) {\n            this.player.log.debug(\"Google Analytics Enabled\");\n            /* jshint ignore:start */\n            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n                (i[r].q=i[r].q||[]).push(arguments);},i[r].l=1*new Date();a=s.createElement(o),\n                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n                })(window,document,'script','//www.google-analytics.com/analytics.js','__gaTracker');\n            /* jshint ignore:end */\n            __gaTracker('create', trackingId, domain);\n            __gaTracker('send', 'pageview');\n        }\n        else {\n            this.player.log.debug(\"No Google Tracking ID found in config file. Disabling Google Analytics\");\n        }\n    }\n    \n    async write(context, { id }, data) {\n        if (this.config.category === undefined || this.config.category === true) {\n            const category = this.config.category || \"PaellaPlayer\";\n            const action = data.event;\n            const labelData = {\n                videoId: id,\n                plugin: data.plugin\n            }\n\n            try {\n                // Test if data parameters can be serialized\n                JSON.stringify(data.params);\n                labelData.params = data.params;\n            }\n            catch(e) {}\n\n            const label = JSON.stringify(labelData);\n\n            __gaTracker(' send', 'event', category, action, label);\n        }\n    }\n}","\nimport { DataPlugin } from 'paella-core';\nimport UserTrackingPlugins from \"./UserTrackingPlugins\";\n\nexport default class DebugUserTrackingDataPlugin extends DataPlugin {\n    getPluginModuleInstance() {\n\t\treturn UserTrackingPlugins.Get();\n\t}\n\n\tget name() {\n\t\treturn super.name || \"es.upv.paella.debug.userTrackingDataPlugin\";\n\t}\n\n    async write(context, { id }, data) {\n        console.log(`id: ${ id }`, context, data);\n    }\n}\n","\nimport { DataPlugin } from 'paella-core';\nimport UserTrackingPlugins from \"./UserTrackingPlugins\";\n\nexport default class DebugTagTrackingDataPlugin extends DataPlugin {\n    getPluginModuleInstance() {\n\t\treturn UserTrackingPlugins.Get();\n\t}\n\n\tget name() {\n\t\treturn super.name || \"es.upv.paella.debugTag.userTrackingDataPlugin\";\n\t}\n\n    async load() {\n        if (this.config.tagId) {\n            this._elem = document.getElementById(this.config.tagId);\n        }\n    }\n\n    async write(context, { id }, data) {\n        if (this._elem) {\n            this._elem.innerHTML += '<br/>' + id + \" \" + data.event;\n        }\n    }\n}","\nimport { DataPlugin, Events, bindEvent  } from \"paella-core\";\nimport UserTrackingPlugins from \"./UserTrackingPlugins\";\n\nexport default class MatomoUserTrackingDataPlugin extends DataPlugin {\n\n    getPluginModuleInstance() {\n\t\treturn UserTrackingPlugins.Get();\n\t}\n\n\tget name() {\n\t\treturn super.name || \"es.upv.paella.matomo.userTrackingDataPlugin\";\n\t}\n\n    async isEnabled() {\n        if (!(await super.isEnabled())) {\n          return false;\n        }\n        else {\n            this.matomoGlobalLoaded = this.config.matomoGlobalLoaded ?? false;\n            this.server = this.config.server;\n            this.siteId = this.config.siteId;\n            this.events = this.config.events;\n            \n            if (!this.matomoGlobalLoaded && !(this.server && this.siteId)) {\n                this.player.log.warn('Matomo plugin: Plugin is enabled, but is not configured correctly. Please configue `matomoGlobalLoaded`, `server`and `siteId` parameters.');\n                return false;\n            }\n            return true;\n        }\n    }\n\n    async getCurrentUserId() {\n        return null;\n    }\n\n    async trackCustomDimensions() {\n        const templateVars = await this.getTemplateVars();\n        const customDimensions = this.config.customDimensions ?? {};\n\n        try {\n            Object.entries(customDimensions).forEach(([customDimensionId, customDimensionValueTemplate]) => {\n                const customDimensionValue = this.applyTemplate(customDimensionValueTemplate, templateVars);\n                _paq.push(['setCustomDimension', customDimensionId, customDimensionValue]);\n                this.player.log.debug(`Matomo plugin: setting custom dimension id=${customDimensionId} to '${customDimensionValue}'`);\n            });\n        }\n        catch(e) {            \n        }\n    }\n\n    async getTemplateVars(data) {\n        let eventData = this.getEventData(data);\n\n        return {\n            videoId: this.player._videoId,\n            metadata: this.player.videoManifest.metadata,\n            event: data?.event || '',\n            eventData: eventData\n        };\n    }\n\n    getEventData(data) {\n\n        switch (data?.event) {\n            case Events.SEEK:\n                return Math.round(data.params.newTime);\n            case Events.VOLUME_CHANGED:\n                return data.params.volume*100;\n            case Events.BUTTON_PRESS:\n                return data.params.plugin.name;\n            case Events.SHOW_POPUP:\n                return data.params.plugin.name;\n            case Events.HIDE_POPUP:\n                return data.params.plugin.name;\n            case Events.RESIZE_END:\n                return `${ data.params.size.w }x${ data.params.size.h }`;\n            case Events.LAYOUT_CHANGED:\n                return data.params.layoutId;\n            case Events.PLAYBACK_RATE_CHANGED:\n                return data.params.newPlaybackRate;\n            case Events.CAPTIONS_ENABLED:\n                return data.params.language;\n        }\n\n        return '';\n    }\n\n    async load() {\n        const heartBeatTime = this.config.heartBeatTime || 15;\n\n        var _paq = window._paq = window._paq || [];\n        // _paq.push(['requireConsent']);\n        _paq.push(['requireCookieConsent']);\n        bindEvent(this.player, Events.COOKIE_CONSENT_CHANGED, () => {\n            this.player.log.debug('Matomo: Cookie consent changed.');\n            if (this.player.cookieConsent.getConsentForType(this.config.cookieType)) {\n                // _paq.push(['rememberConsentGiven']);\n                _paq.push(['rememberCookieConsentGiven']);\n            }\n            else {\n                // _paq.push(['forgetConsentGiven']);\n                _paq.push(['forgetCookieConsentGiven']);\n            }\n        });\n        \n        \n        if (this.matomoGlobalLoaded) {\n            var _paq = window._paq = window._paq || [];\n            this.player.log.debug('Assuming Matomo analytics is initialized globaly.');\n            if (server) {\n                this.player.log.warn('Matomo plugin: `server` parameter is defined, but never used because Matomo is loaded globaly in the page. Is it an error? Please check it.');\n            }\n            if (siteId) {\n                this.player.log.warn('Matomo plugin: `siteId` parameter is defined, but never used because Matomo is loaded globaly in the page. Is it an error? Please check it.');\n            }\n        }\n        else {\n            const server = this.server;\n            const siteId = this.siteId;            \n            this.player.log.debug(\"Matomo analytics plugin enabled.\");\n            this.trackCustomDimensions();\n            const userId =  await this.getCurrentUserId();\n            if (userId) {\n                _paq.push(['setUserId', userId]);\n            }\n            _paq.push(['trackPageView']);\n            _paq.push(['enableLinkTracking']);\n            (function() {\n                var u=server;\n                _paq.push(['setTrackerUrl', u+'matomo.php']);\n                _paq.push(['setSiteId', siteId]);\n                var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];\n                g.type='text/javascript'; g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);\n            })();\n        }\n        // accurately measure the time spent in the visit\n        _paq.push(['enableHeartBeatTimer', heartBeatTime]);\n        this.trackCustomDimensions();\n        // Scan For Media\n        bindEvent(this.player, Events.STREAM_LOADED, () => {\n            _paq.push(['MediaAnalytics::scanForMedia']);\n        });\n    }\n    \n    applyTemplate(txt, templateVars) {        \n        return txt.replace(/\\${[^{]*}/g, (t)=>{\n            return t.substring(2, t.length-1).split(\".\").reduce((a,b)=>{return a[b];}, templateVars)\n        });\n    };\n\n    async write(context, { id }, data) {\n        if (this.events) {\n            const categoryT = this.events.category || 'PaellaPlayer';\n            const actionT = this.events.action || '${event}';\n            const nameT = this.events.name || '${eventData}';\n\n            const templateVars = await this.getTemplateVars(data);\n\n            const category = this.applyTemplate(categoryT, templateVars);\n            const action = this.applyTemplate(actionT, templateVars);\n            const name = this.applyTemplate(nameT, templateVars);\n            \n            _paq.push(['trackEvent', category, action, name]);\n            this.player.log.debug(`Matomo plugin: track event category='${category}', action='${action}', name='${name}'`);\n        }\n    }\n}","import { Events, EventLogPlugin } from 'paella-core';\nimport UserTrackingPlugins from \"./UserTrackingPlugins\";\n\n//const eventKeys = Object.keys(Events);\n\nconst getPaellaEvents = (events) => events.map(eventName => Events[eventName]);\n\nexport default class UserEventTrackerPlugin extends EventLogPlugin {\n\tgetPluginModuleInstance() {\n\t\treturn UserTrackingPlugins.Get();\n\t}\n\n\tget name() {\n\t\treturn super.name || \"es.upv.paella.userEventTracker\";\n\t}\n\n\tget events() {\n\t\tif (this.config.events) {\n\t\t\treturn getPaellaEvents(this.config.events);\n\t\t}\n\t\telse {\n\t\t\treturn [\n\t\t\t\tEvents.PLAY,\n\t\t\t\tEvents.PAUSE,\n\t\t\t\tEvents.SEEK,\n\t\t\t\tEvents.STOP,\n\t\t\t\tEvents.ENDED,\n\t\t\t\tEvents.FULLSCREEN_CHANGED,\n\t\t\t\tEvents.VOLUME_CHANGED,\n\t\t\t\tEvents.BUTTON_PRESS,\n\t\t\t\tEvents.RESIZE_END\n\t\t\t]\n\t\t}\n\t}\n\n\tasync onEvent(event, params) {\n\t\tconst id = this.player.videoId;\n\t\t// Remove plugin reference to avoid circular references\n\t\tif (params.plugin) {\n\t\t\tconst { name, config } = params.plugin;\n\t\t\tparams.plugin = { name, config }\n\t\t}\n\t\tconst trackingData = { event, params }\n\n\t\tswitch (event) {\n\t\tcase Events.SHOW_POPUP:\n\t\tcase Events.HIDE_POPUP:\n\t\tcase Events.BUTTON_PRESS:\n\t\t\ttrackingData.plugin = params.plugin?.name || null;\n\t\t}\n\n\t\tconst context = this.config.context || \"userTracking\";\n\t\tawait this.player.data.write(\n\t\t\tcontext,\n\t\t\t{ id },\n\t\t\ttrackingData\n\t\t);\n\t}\n}\n","var map = {\n\t\"./UserTrackingPlugins.js\": 263,\n\t\"./es.upv.paella.analytics.userTrackingDataPlugin.js\": 561,\n\t\"./es.upv.paella.debug.userTrackingDataPlugin.js\": 931,\n\t\"./es.upv.paella.debugTag.userTrackingDataPlugin.js\": 484,\n\t\"./es.upv.paella.matomo.userTrackingDataPlugin.js\": 685,\n\t\"./es.upv.paella.userEventTracker.js\": 11\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 757;","module.exports = __WEBPACK_EXTERNAL_MODULE__995__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","\nimport GoogleAnalyticsUserTrackingData from './plugins/es.upv.paella.analytics.userTrackingDataPlugin';\nimport MatomoUserTrackingData from './plugins/es.upv.paella.matomo.userTrackingDataPlugin';\nimport DebugUserTrackingData from './plugins/es.upv.paella.debug.userTrackingDataPlugin';\nimport UserEventTracker from './plugins/es.upv.paella.userEventTracker';\n\nexport default function getUserTrackingPluginsContext() {\n    return require.context(\"./plugins\", true, /\\.js/)\n}\n\nexport const userTrackingPlugins = [\n    {\n        plugin: GoogleAnalyticsUserTrackingData,\n        config: {\n            enabled: true\n        },\n    },\n    {\n        plugin: MatomoUserTrackingData,\n        config: {\n            enabled: true\n        },\n    },\n    {\n        plugin: DebugUserTrackingData,\n        config: {\n            enabled: true\n        },\n    },\n    {\n        plugin: UserEventTracker,\n        config: {\n            enabled: true\n        },\n    }\n];\n\nexport const GoogleAnalyticsUserTrackingDataPlugin = GoogleAnalyticsUserTrackingData;\nexport const MatomoUserTrackingDataPlugin = MatomoUserTrackingData;\nexport const DebugUserTrackingDataPlugin = DebugUserTrackingData;\nexport const UserEventTrackerPlugin = UserEventTracker;\n"],"names":["root","factory","exports","module","require","define","amd","undefined","self","__WEBPACK_EXTERNAL_MODULE__995__","g_pluginModule","UserTrackingPlugins","PluginModule","i","AnalyticsUserTrackingDataPlugin","Get","trackingId","this","config","domain","player","log","debug","s","o","g","r","a","m","q","push","arguments","l","Date","createElement","getElementsByTagName","async","src","parentNode","insertBefore","window","document","__gaTracker","context","data","id","category","action","event","labelData","videoId","plugin","JSON","stringify","params","e","label","DataPlugin","DebugUserTrackingDataPlugin","console","DebugTagTrackingDataPlugin","tagId","_elem","getElementById","innerHTML","MatomoUserTrackingDataPlugin","matomoGlobalLoaded","server","siteId","events","warn","getTemplateVars","templateVars","customDimensions","Object","entries","forEach","customDimensionId","customDimensionValueTemplate","customDimensionValue","applyTemplate","_paq","eventData","getEventData","_videoId","metadata","videoManifest","Events","SEEK","Math","round","newTime","VOLUME_CHANGED","volume","BUTTON_PRESS","SHOW_POPUP","HIDE_POPUP","name","RESIZE_END","size","w","h","LAYOUT_CHANGED","layoutId","PLAYBACK_RATE_CHANGED","newPlaybackRate","CAPTIONS_ENABLED","language","heartBeatTime","bindEvent","COOKIE_CONSENT_CHANGED","cookieConsent","getConsentForType","cookieType","trackCustomDimensions","getCurrentUserId","userId","u","d","type","STREAM_LOADED","txt","replace","t","substring","length","split","reduce","b","categoryT","actionT","nameT","UserEventTrackerPlugin","map","eventName","PLAY","PAUSE","STOP","ENDED","FULLSCREEN_CHANGED","trackingData","write","EventLogPlugin","webpackContext","req","webpackContextResolve","__webpack_require__","Error","code","keys","resolve","__webpack_module_cache__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","definition","key","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","getUserTrackingPluginsContext","userTrackingPlugins","GoogleAnalyticsUserTrackingData","enabled","MatomoUserTrackingData","DebugUserTrackingData","UserEventTracker","GoogleAnalyticsUserTrackingDataPlugin"],"sourceRoot":""}